import { Logger } from './logger.js';
import { Message, MessageHeaders, MessageMetadata, MessageOperationMetadata } from './message.js';
import { OrderBy } from './messages.js';
import { OccupancyData } from './occupancy.js';
import { PaginatedResult } from './query.js';
import { RestMessage } from './rest-types.js';
import * as Ably from 'ably';
export interface GetMessagesQueryParams {
    start?: number;
    end?: number;
    orderBy?: OrderBy;
    limit?: number;
    /**
     * Serial indicating the starting point for message retrieval.
     * This serial is specific to the region of the channel the client is connected to. Messages published within
     * the same region of the channel are guaranteed to be received in increasing serial order.
     *
     * @defaultValue undefined (not used if not specified)
     */
    fromSerial?: string;
}
export interface CreateMessageResponse {
    serial: string;
    createdAt: number;
}
interface SendMessageParams {
    text: string;
    metadata?: MessageMetadata;
    headers?: MessageHeaders;
}
/**
 * Represents the response for deleting or updating a message.
 */
export interface MessageOperationResponse {
    /**
     * The new message version.
     */
    version: string;
    /**
     * The timestamp of the operation.
     */
    timestamp: number;
    /**
     * The message that was created or updated.
     */
    message: RestMessage;
}
type UpdateMessageResponse = MessageOperationResponse;
type DeleteMessageResponse = MessageOperationResponse;
interface UpdateMessageParams {
    /**
     * Message data to update. All fields are updated and, if omitted, they are
     * set to empty.
     */
    message: {
        text: string;
        metadata?: MessageMetadata;
        headers?: MessageHeaders;
    };
    /** Description of the update action */
    description?: string;
    /** Metadata of the update action */
    metadata?: MessageOperationMetadata;
}
interface DeleteMessageParams {
    /** Description of the delete action */
    description?: string;
    /** Metadata of the delete action */
    metadata?: MessageOperationMetadata;
}
/**
 * Parameters for adding a message reaction.
 */
export interface AddMessageReactionParams {
    /**
     * The type of reaction, must be one of {@link MessageReactionType}.
     */
    type: string;
    /**
     * The reaction name to add; ie. the emoji.
     */
    name: string;
    /**
     * The count of the reaction for type {@link MessageReactionType.Multiple}.
     * Defaults to 1 if not set. Not supported for other reaction types.
     * @default 1
     */
    count?: number;
}
/**
 * Parameters for deleting a message reaction.
 */
export interface DeleteMessageReactionParams {
    /**
     * The type of reaction, must be one of {@link MessageReactionType}.
     */
    type: string;
    /**
     * The reaction name to remove, ie. the emoji. Required for all reaction types
     * except {@link MessageReactionType.Unique}.
     */
    name?: string;
}
/**
 * Chat SDK Backend
 */
export declare class ChatApi {
    private readonly _realtime;
    private readonly _logger;
    private readonly _apiProtocolVersion;
    constructor(realtime: Ably.Realtime, logger: Logger);
    getMessages(roomName: string, params: GetMessagesQueryParams): Promise<PaginatedResult<Message>>;
    private _recursivePaginateMessages;
    deleteMessage(roomName: string, serial: string, params?: DeleteMessageParams): Promise<DeleteMessageResponse>;
    sendMessage(roomName: string, params: SendMessageParams): Promise<CreateMessageResponse>;
    updateMessage(roomName: string, serial: string, params: UpdateMessageParams): Promise<UpdateMessageResponse>;
    addMessageReaction(roomName: string, serial: string, data: AddMessageReactionParams): Promise<void>;
    deleteMessageReaction(roomName: string, serial: string, data: DeleteMessageReactionParams): Promise<void>;
    getOccupancy(roomName: string): Promise<OccupancyData>;
    private _makeAuthorizedRequest;
    private _makeAuthorizedPaginatedRequest;
}
export {};
